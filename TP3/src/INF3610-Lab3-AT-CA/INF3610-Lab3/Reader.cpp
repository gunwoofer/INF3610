///////////////////////////////////////////////////////////////////////////////
//
//	Reader.cpp
//
///////////////////////////////////////////////////////////////////////////////
#include "Reader.h"

///////////////////////////////////////////////////////////////////////////////
//
//	Constructor
//
///////////////////////////////////////////////////////////////////////////////
Reader::Reader(sc_module_name name) /* à compléter */
{
	/* à compléter */
}

///////////////////////////////////////////////////////////////////////////////
//
//	Destructor
//
///////////////////////////////////////////////////////////////////////////////
Reader::~Reader()
{
}

///////////////////////////////////////////////////////////////////////////////
//
//	Thread
//
///////////////////////////////////////////////////////////////////////////////
void Reader::thread(void)
{
	// Variable
	unsigned int uiAddress;
	unsigned int uiData;

	// Boucle infinie
	while (1)
	{
		// Verify request port
		do {
			wait(clk->posedge_event());
		} while (!request.read());

		uiAddress = address.read();
		uiData = dataPortRAM->Read(uiAddress);
		data.write(uiData);
		ack.write(true);

		wait(clk->posedge_event());
		ack.write(false);
	}
}